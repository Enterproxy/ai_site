(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{192:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(2115);let o=n.forwardRef(function(e,t){let{title:a,titleId:o,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},r),a?n.createElement("title",{id:o},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))})},1325:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(5155),o=a(2115);function r(e){let{message:t}=e;return(0,n.jsx)("div",{className:"p-3 rounded-md max-w-xl ".concat("user"===t.role?"bg-blue-100 text-right self-end":"bg-gray-100 text-left self-start"),children:(0,n.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:t.content})})}var s=a(1886),l=a(192);let i=o.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?o.createElement("title",{id:n},a):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))});function c(){let[e,t]=(0,o.useState)([]),[a,c]=(0,o.useState)(""),[d,u]=(0,o.useState)(!1),p=async()=>{if(!a.trim())return;let n=[...e,{role:"user",content:a}];t(n),c(""),u(!0);let o=await (0,s.gJ)(n);t([...n,{role:"assistant",content:o}]),u(!1)};return(0,n.jsxs)("div",{className:"max-w-3xl mx-auto space-y-4",children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold mb-4 flex items-center",children:[(0,n.jsx)(l.A,{className:"w-6 h-6 mr-2 text-blue-600"}),"Czat z Bazą Wiedzy"]}),(0,n.jsxs)("div",{className:"space-y-2",children:[e.map((e,t)=>(0,n.jsx)(r,{message:e},t)),d&&(0,n.jsx)(r,{message:{role:"assistant",content:"Piszę odpowiedź..."}})]}),(0,n.jsxs)("div",{className:"mt-6 flex gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center border border-gray-300 rounded px-4 py-2 w-full",children:[(0,n.jsx)(l.A,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,n.jsx)("input",{type:"text",className:"w-full outline-none",placeholder:"Zadaj pytanie...",value:a,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&p()})]}),(0,n.jsxs)("button",{onClick:p,disabled:d,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:[(0,n.jsx)(i,{className:"w-5 h-5 inline-block mr-2"}),"Wyślij"]})]})]})}},1886:(e,t,a)=>{"use strict";a.d(t,{Nn:()=>i,P_:()=>o,XX:()=>c,_R:()=>l,gJ:()=>s,oP:()=>n,sW:()=>r});async function n(e,t){let a=await fetch("/api/documents/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw console.error("❌ Błąd zapisu edytowanego dokumentu:",await a.text()),Error("Nie udało się zapisać zmian");return a.json()}async function o(e,t){let a=await fetch("/api/documents"),n=await a.text();if(!a.ok){let e=n;try{let t=JSON.parse(n);e=t.error||JSON.stringify(t)}catch(e){}return console.error("Błąd pobierania dokument\xf3w:",a.status,e),[]}return JSON.parse(n).filter(a=>{var n,o;let r=!t||a.title.toLowerCase().includes(t.toLowerCase()),s=!(null==e?void 0:e.author)||(null==(n=a.author)?void 0:n.toLowerCase().includes(e.author.toLowerCase())),l=!(null==e?void 0:e.language)||(null==(o=a.language)?void 0:o.toLowerCase().includes(e.language.toLowerCase())),i=((null==e?void 0:e.tags)||[]).filter(e=>e),c=0===i.length||i.every(e=>{var t;return null==(t=a.tags)?void 0:t.includes(e)}),d=new Date(a.date||""),u=!(null==e?void 0:e.dateFrom)||d>=new Date(e.dateFrom),p=!(null==e?void 0:e.dateTo)||d<=new Date(e.dateTo);return r&&s&&l&&c&&u&&p})}async function r(e){let t=await fetch("/api/documents/".concat(e));return t.ok?t.json():null}async function s(e){let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e})});return t.ok?(await t.json()).reply||"Brak odpowiedzi.":(console.error("❌ Błąd czatu:",await t.text()),"Nie udało się uzyskać odpowiedzi.")}async function l(e){let t=await fetch("/api/documents/".concat(e));return t.ok?t.json():null}async function i(e){let t=await fetch("/api/documents/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.text().catch(()=>t.statusText);throw console.error("❌ deleteDocument error:",t.status,e),Error("Usuwanie dokumentu nie powiodło się")}}async function c(e,t){let a=new FormData;a.append("file",e),a.append("title",t.title||e.name),a.append("author",t.author||""),a.append("date",t.date||new Date().toISOString()),a.append("language",t.language||""),a.append("tags",JSON.stringify(t.tags||[])),a.append("keywords",JSON.stringify(t.keywords||[])),a.append("content",t.content||"");let n=await fetch("/api/documents",{method:"POST",body:a}),o=await n.text();if(console.log("uploadDocument status",n.status,"body",o),!n.ok)throw Error(o||n.statusText);return JSON.parse(o)}},4019:(e,t,a)=>{Promise.resolve().then(a.bind(a,1325))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(4019)),_N_E=e.O()}]);